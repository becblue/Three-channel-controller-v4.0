# é˜¶æ®µ6ç¼–è¯‘éªŒè¯æŒ‡å—

## ğŸ“‹ Keilé¡¹ç›®é…ç½®æ£€æŸ¥æ¸…å•

### 1. ç¡®è®¤æ–°å¢æ–‡ä»¶å·²æ·»åŠ åˆ°é¡¹ç›®

âœ… **alarm_output.c** - å·²æ·»åŠ åˆ°é¡¹ç›®ï¼ˆæ£€æŸ¥é€šè¿‡ï¼‰
âœ… **alarm_output.h** - è‡ªåŠ¨è¯†åˆ«
âœ… **common_def.c** - åº”è¯¥å·²å­˜åœ¨
âœ… **common_def.h** - åº”è¯¥å·²å­˜åœ¨

### 2. æ‰‹åŠ¨ç¼–è¯‘éªŒè¯å‘½ä»¤

åœ¨é¡¹ç›®æ ¹ç›®å½• `E:\STM32\Three-channel controller_v4.0` æ‰§è¡Œï¼š

```powershell
& "C:\Keil_v5\UV4\UV4.exe" -b "MDK-ARM\Three-channel controller_v4.0.uvprojx"
```

**æ³¨æ„**ï¼šæ ¹æ®æ‚¨çš„Keilå®é™…å®‰è£…è·¯å¾„è°ƒæ•´å‘½ä»¤ã€‚

---

## ğŸ” å¸¸è§ç¼–è¯‘é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1ï¼šæ‰¾ä¸åˆ° `CommonDef_GetErrorString`

**å¯èƒ½åŸå› **ï¼š`common_def.c` æœªæ·»åŠ åˆ°Keilé¡¹ç›®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€Keilé¡¹ç›®
2. åœ¨å·¦ä¾§é¡¹ç›®æ ‘ä¸­ï¼Œæ‰¾åˆ° `Application/User/Core` ç»„
3. å³é”®é€‰æ‹© **"Add Existing Files to Group..."**
4. é€‰æ‹© `Core\Src\common_def.c`
5. ç‚¹å‡» Add â†’ Close

---

### é”™è¯¯2ï¼šæ‰¾ä¸åˆ° `alarm_output.c`

**å¯èƒ½åŸå› **ï¼šæ–°æ–‡ä»¶æœªæ·»åŠ åˆ°Keilé¡¹ç›®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€Keilé¡¹ç›®
2. åœ¨å·¦ä¾§é¡¹ç›®æ ‘ä¸­ï¼Œæ‰¾åˆ° `Application/User/Core` ç»„
3. å³é”®é€‰æ‹© **"Add Existing Files to Group..."**
4. é€‰æ‹© `Core\Src\alarm_output.c`
5. ç‚¹å‡» Add â†’ Close

---

### é”™è¯¯3ï¼š`undefined reference to 'printf'`

**å¯èƒ½åŸå› **ï¼šç¼ºå°‘stdioé‡å®šå‘é…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼š
ç¡®è®¤ `usart.c` ä¸­åŒ…å«ä»¥ä¸‹ä»£ç ï¼š
```c
#ifdef __GNUC__
#define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
#else
#define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
#endif

PUTCHAR_PROTOTYPE
{
    HAL_UART_Transmit(&huart1, (uint8_t *)&ch, 1, 0xFFFF);
    return ch;
}
```

---

### é”™è¯¯4ï¼š`HAL_GPIO_WritePin` æœªå®šä¹‰

**å¯èƒ½åŸå› **ï¼šç¼ºå°‘gpio.håŒ…å«

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `alarm_output.c` ç¡®è®¤åŒ…å«ï¼š
```c
#include "gpio.h"
```

---

## ğŸ› ï¸ æ‰‹åŠ¨æ£€æŸ¥æ­¥éª¤

### æ­¥éª¤1ï¼šæ‰“å¼€Keilé¡¹ç›®
```
MDK-ARM\Three-channel controller_v4.0.uvprojx
```

### æ­¥éª¤2ï¼šæ£€æŸ¥é¡¹ç›®æ ‘
ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶åœ¨ `Application/User/Core` ç»„ä¸­ï¼š
- [x] main.c
- [x] gpio.c
- [x] usart.c
- [x] adc.c
- [x] tim.c
- [x] i2c.c
- [x] spi.c
- [x] dma.c
- [x] stm32f1xx_it.c
- [x] stm32f1xx_hal_msp.c
- [x] system_stm32f1xx.c
- [x] common_def.c
- [x] temperature.c
- [x] oled_display.c
- [x] **alarm_output.c** â† æ–°å¢

### æ­¥éª¤3ï¼šæ‰§è¡Œç¼–è¯‘
æŒ‰ **F7** æˆ–ç‚¹å‡» **Build** æŒ‰é’®

### æ­¥éª¤4ï¼šæŸ¥çœ‹ç¼–è¯‘ç»“æœ
æŸ¥çœ‹è¾“å‡ºçª—å£åº•éƒ¨ï¼š
```
"Three-channel controller_v4.0\Three-channel controller_v4.0" - X Error(s), Y Warning(s).
```

---

## ğŸ“Š é¢„æœŸç¼–è¯‘ç»“æœ

### âœ… æˆåŠŸç¼–è¯‘è¾“å‡º
```
Build target 'Three-channel controller_v4.0'
compiling alarm_output.c...
compiling main.c...
linking...
Program Size: Code=XXXX RO-data=XXXX RW-data=XXX ZI-data=XXXX

"Three-channel controller_v4.0\Three-channel controller_v4.0" - 0 Error(s), 0 Warning(s).

Build Time Elapsed: 00:00:XX
```

### ğŸ“¦ ç”Ÿæˆæ–‡ä»¶
ç¼–è¯‘æˆåŠŸååº”ç”Ÿæˆï¼š
- `Three-channel controller_v4.0.hex` - çƒ§å†™æ–‡ä»¶
- `Three-channel controller_v4.0.map` - å†…å­˜æ˜ å°„
- `Three-channel controller_v4.0.axf` - è°ƒè¯•æ–‡ä»¶

---

## ğŸš¨ å¦‚æœä»æœ‰é”™è¯¯

è¯·å°†**å®Œæ•´çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯**å‘é€ç»™æˆ‘ï¼ŒåŒ…æ‹¬ï¼š
1. é”™è¯¯ä»£ç ï¼ˆå¦‚ error C2XXXï¼‰
2. é”™è¯¯æè¿°
3. é”™è¯¯æ‰€åœ¨æ–‡ä»¶å’Œè¡Œå·

ç¤ºä¾‹ï¼š
```
..\Core\Src\alarm_output.c(69): error:  #20: identifier "CommonDef_GetErrorString" is undefined
```

---

## âœ… éªŒè¯æ¸…å•

ç¼–è¯‘æˆåŠŸåï¼Œè¯·ç¡®è®¤ï¼š
- [ ] 0 Error
- [ ] 0 Warningï¼ˆæˆ–åªæœ‰HALåº“è­¦å‘Šï¼‰
- [ ] ç”Ÿæˆ.hexæ–‡ä»¶
- [ ] æ–‡ä»¶å¤§å°åˆç†ï¼ˆçº¦80-100KBï¼‰

---

**å®ŒæˆéªŒè¯åå³å¯è¿›è¡Œç¡¬ä»¶æµ‹è¯•ï¼** ğŸš€
